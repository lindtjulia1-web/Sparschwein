<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Конструктор Копилки</title>
    <style>
        :root { --accent: #ffd700; --bg: #1a1a1a; --panel: #2d2d2d; }
        body { background: #111; color: #eee; font-family: 'Segoe UI', Tahoma, sans-serif; margin: 0; display: flex; height: 100vh; }
        
        /* Панель настроек */
        .sidebar { width: 350px; background: var(--panel); padding: 20px; overflow-y: auto; border-right: 2px solid #000; }
        h2 { color: var(--accent); font-size: 18px; margin-top: 0; border-bottom: 1px solid #444; padding-bottom: 10px; }
        label { display: block; margin: 15px 0 5px; font-size: 13px; color: #bbb; }
        input, textarea, select { 
            width: 100%; background: #1a1a1a; border: 1px solid #444; color: #fff; 
            padding: 8px; border-radius: 4px; box-sizing: border-box; 
        }
        .btn-main { 
            width: 100%; padding: 12px; margin-top: 20px; border-radius: 6px; border: none;
            background: var(--accent); color: #000; font-weight: bold; cursor: pointer; transition: 0.2s;
        }
        .btn-main:hover { background: #fff; transform: translateY(-2px); }

        /* Область предпросмотра */
        .preview-area { flex-grow: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; background: #000; position: relative; }
        .preview-label { position: absolute; top: 10px; left: 10px; color: #555; font-weight: bold; text-transform: uppercase; }
        
        /* Виджет игры */
        #widget-container {
            width: 400px; height: 500px; background: #1a1a1a; border-radius: 20px;
            display: flex; flex-direction: column; align-items: center; padding: 20px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5); border: 1px solid #333;
        }
        .pig-img { width: 220px; height: 160px; object-fit: contain; margin-bottom: 15px; }
        .score-val { color: var(--accent); font-size: 28px; font-weight: bold; margin: 10px 0; }
        .q-text { text-align: center; font-size: 18px; min-height: 50px; margin-bottom: 20px; }
        .btn-grid { display: flex; gap: 10px; justify-content: center; flex-wrap: wrap; }
        .game-btn { 
            background: none; border: 2px solid var(--accent); color: var(--accent);
            padding: 10px 20px; border-radius: 8px; font-weight: bold; cursor: pointer;
        }
    </style>
</head>
<body>

<div class="sidebar">
    <h2>⚙️ Настройка игры</h2>
    
    <label>Язык интерфейса</label>
    <select id="cfg-lang">
        <option value="ru">Русский</option>
        <option value="de">Deutsch</option>
        <option value="en">English</option>
    </select>

    <label>Прямая ссылка на картинку (URL)</label>
    <input type="text" id="cfg-img" placeholder="https://example.com/pig.png" value="https://i.ibb.co/pX99S99/glass-pig.png">
    
    <label>Вопрос</label>
    <textarea id="cfg-q" rows="2">Emil ... um neun Uhr gefühstückt.</textarea>
    
    <label>Варианты (через запятую)</label>
    <input type="text" id="cfg-ans" value="ist, hat">
    
    <label>Индекс правильного (0, 1, 2...)</label>
    <input type="number" id="cfg-correct" value="1">

    <label>Ставки (через запятую)</label>
    <input type="text" id="cfg-bets" value="10, 25, 50">

    <button class="btn-main" onclick="updatePreview()">ОБНОВИТЬ ПРЕДПРОСМОТР</button>
    
    <div style="margin-top: 30px; font-size: 11px; color: #666;">
        * Вставьте этот URL в настройки для Genially после публикации.
    </div>
</div>

<div class="preview-area">
    <div class="preview-label">Предпросмотр</div>
    
    <div id="widget-container">
        <div style="width: 100%; display: flex; justify-content: flex-end; gap: 5px;">
            <div style="font-size: 10px; border: 1px solid #444; padding: 2px 5px;">DE</div>
            <div style="font-size: 10px; border: 1px solid #444; padding: 2px 5px;">EN</div>
            <div style="font-size: 10px; border: 1px solid var(--accent); color: var(--accent); padding: 2px 5px;">RU</div>
        </div>

        <img id="view-img" class="pig-img" src="https://i.ibb.co/pX99S99/glass-pig.png" alt="piggy">
        
        <div id="view-label-bank" style="color: #888; font-size: 14px; margin-top: 10px;">Всего:</div>
        <div class="score-val">0</div>

        <div id="view-q" class="q-text">Вопрос появится здесь</div>

        <div id="view-btns" class="btn-grid">
            </div>
    </div>
</div>

<script>
    const lexicon = {
        ru: { bank: "Всего:" },
        en: { bank: "Total:" },
        de: { bank: "Gesamt:" }
    };

    function updatePreview() {
        const lang = document.getElementById('cfg-lang').value;
        const imgUrl = document.getElementById('cfg-img').value;
        const question = document.getElementById('cfg-q').value;
        const bets = document.getElementById('cfg-bets').value.split(',');

        // Обновляем картинку
        const imgEl = document.getElementById('view-img');
        imgEl.onerror = () => { imgEl.src = 'https://via.placeholder.com/220x160?text=Image+Error'; };
        imgEl.src = imgUrl;

        // Обновляем тексты
        document.getElementById('view-label-bank').innerText = lexicon[lang].bank;
        document.getElementById('view-q').innerText = question;

        // Обновляем кнопки ставок
        const btnContainer = document.getElementById('view-btns');
        btnContainer.innerHTML = '';
        bets.forEach(val => {
            const b = document.createElement('button');
            b.className = 'game-btn';
            b.innerText = val.trim();
            btnContainer.appendChild(b);
        });
    }

    // Инициализация
    updatePreview();
</script>

</body>
</html>

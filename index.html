<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <style>
        :root {
            --gold: #f9e076;
            --gold-gradient: linear-gradient(to top, #bf953f, #fcf6ba, #b38728, #fbf5b7, #aa771c);
            --bg: #0b0b0d;
        }
        body { background: transparent; margin: 0; font-family: 'Segoe UI', sans-serif; color: white; display: flex; justify-content: center; }
        
        .game-card {
            width: 360px; background: #16161a; border-radius: 28px; padding: 20px;
            border: 1px solid #333; text-align: center; box-shadow: 0 20px 50px rgba(0,0,0,0.5);
        }

        /* Контейнер свинки */
        .pig-box { position: relative; width: 220px; height: 160px; margin: 0 auto; }
        
        .sand-layer {
            position: absolute; bottom: 30px; left: 50%; transform: translateX(-50%);
            width: 145px; background: var(--gold-gradient);
            transition: height 1s ease-in-out; border-radius: 0 0 50px 50px; z-index: 1;
        }

        .pig-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: url('https://i.ibb.co/vz6mYmY/transparent-piggy.png') no-repeat center;
            background-size: contain; z-index: 2; pointer-events: none; opacity: 0.8;
        }

        /* Интерфейс */
        .question-box { min-height: 60px; font-size: 18px; margin: 15px 0; color: #ddd; }
        .score-val { font-size: 32px; color: var(--gold); font-weight: bold; margin-bottom: 10px; }
        
        .btn-group { display: flex; justify-content: center; gap: 10px; flex-wrap: wrap; }
        .btn {
            background: #222; border: 1px solid var(--gold); color: var(--gold);
            padding: 10px 20px; border-radius: 12px; cursor: pointer; font-weight: bold; transition: 0.2s;
        }
        .btn:hover { background: var(--gold); color: #000; }
        .btn-ans { border-color: #fff; color: #fff; }

        .hidden { display: none; }
        .feedback { font-weight: bold; margin-top: 10px; font-size: 14px; }
    </style>
</head>
<body>

<div class="game-card">
    <div class="pig-box">
        <div id="sand" class="sand-layer" style="height: 0%"></div>
        <div class="pig-overlay"></div>
    </div>

    <div class="score-val" id="total-score">0</div>
    <div class="question-box" id="q-text">Задание появится здесь...</div>

    <div id="step-bet">
        <p style="font-size: 12px; color: #777;">ВЫБЕРИТЕ СТАВКУ</p>
        <div class="btn-group">
            <button class="btn" onclick="makeBet(10)">10</button>
            <button class="btn" onclick="makeBet(25)">25</button>
            <button class="btn" onclick="makeBet(50)">50</button>
        </div>
    </div>

    <div id="step-ans" class="hidden">
        <div class="btn-group" id="ans-container"></div>
    </div>

    <div id="step-result" class="hidden">
        <div id="feedback-msg" class="feedback"></div>
        <button class="btn" style="margin-top:15px;" onclick="nextQuestion()">ДАЛЕЕ</button>
    </div>
</div>

<script>
    let total = 0;
    let currentBet = 0;
    let qIndex = 0;

    const questions = [
        { q: "Emil ... um neun Uhr gefrühstückt.", a: ["hat", "ist"], correct: 0 },
        { q: "Wir ... gestern im Kino gewesen.", a: ["haben", "sind"], correct: 1 },
        { q: "Ich ... meine Hausaufgaben gemacht.", a: ["habe", "bin"], correct: 0 }
    ];

    function init() {
        document.getElementById('q-text').innerText = questions[qIndex].q;
    }

    function makeBet(val) {
        currentBet = val;
        document.getElementById('step-bet').classList.add('hidden');
        
        // Генерируем кнопки ответов
        const container = document.getElementById('ans-container');
        container.innerHTML = '';
        questions[qIndex].a.forEach((text, i) => {
            container.innerHTML += `<button class="btn btn-ans" onclick="checkAns(${i})">${text}</button>`;
        });
        
        document.getElementById('step-ans').classList.remove('hidden');
    }

    function checkAns(idx) {
        const isCorrect = idx === questions[qIndex].correct;
        const msg = document.getElementById('feedback-msg');
        
        if(isCorrect) {
            total += currentBet;
            msg.innerText = "ВЕРНО! ПЕСОК ПРИБАВЛЕН";
            msg.style.color = "#4caf50";
        } else {
            total = Math.max(0, total - currentBet);
            msg.innerText = "ОШИБКА! ПЕСОК УМЕНЬШИЛСЯ";
            msg.style.color = "#ff5252";
        }

        updateVisual();
        document.getElementById('step-ans').classList.add('hidden');
        document.getElementById('step-result').classList.remove('hidden');
    }

    function updateVisual() {
        document.getElementById('total-score').innerText = total;
        // Наполнение песком (макс 70% высоты)
        let h = Math.min(70, (total / 200) * 70);
        document.getElementById('sand').style.height = h + '%';
    }

    function nextQuestion() {
        qIndex = (qIndex + 1) % questions.length;
        document.getElementById('q-text').innerText = questions[qIndex].q;
        document.getElementById('step-result').classList.add('hidden');
        document.getElementById('step-bet').classList.remove('hidden');
    }

    init();
</script>
</body>
</html>

<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <style>
        /* Полная прозрачность для Genially */
        body, html { margin: 0; padding: 0; background: transparent; overflow: hidden; font-family: sans-serif; height: 100%; }
        
        .game-wrapper {
            width: 100%; height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: center; color: white;
        }

        /* Кнопки языков */
        .lang-switch { position: absolute; top: 15px; right: 15px; display: flex; gap: 8px; }
        .l-btn { font-size: 11px; border: 1px solid rgba(255,255,255,0.4); padding: 4px 8px; border-radius: 4px; cursor: pointer; color: #aaa; background: rgba(0,0,0,0.2); }
        .l-btn.active { color: #ffd700; border-color: #ffd700; background: rgba(255,215,0,0.1); }

        /* Контейнер копилки */
        .pig-container { position: relative; width: 260px; height: 180px; margin-bottom: 10px; display: flex; align-items: flex-end; justify-content: center; }
        .pig-svg { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 10; filter: drop-shadow(0 5px 15px rgba(0,0,0,0.5)); }
        
        /* Золотое наполнение */
        .gold-fill { 
            width: 170px; height: 0%; 
            background: linear-gradient(to top, #8a6d3b, #ffd700, #fff5a0); 
            border-radius: 0 0 85px 85px; margin-bottom: 25px; 
            transition: height 1s cubic-bezier(0.17, 0.67, 0.83, 0.67); 
            box-shadow: inset 0 0 20px rgba(0,0,0,0.3); z-index: 5; 
        }

        .total-display { font-size: 26px; color: #ffd700; margin: 10px 0 20px; font-weight: bold; text-shadow: 0 2px 10px rgba(0,0,0,0.8); }

        /* Игровой блок */
        .ui-box { text-align: center; width: 90%; max-width: 450px; }
        .question { font-size: 20px; margin-bottom: 25px; min-height: 60px; text-shadow: 0 2px 5px black; line-height: 1.3; }

        .btn-row { display: flex; flex-wrap: wrap; gap: 12px; justify-content: center; }
        .btn { 
            background: rgba(20, 20, 20, 0.6); border: 2px solid #ffd700; color: #ffd700; 
            padding: 14px 25px; border-radius: 12px; cursor: pointer; font-weight: bold; font-size: 18px; 
            transition: 0.3s; backdrop-filter: blur(5px);
        }
        .btn:hover { background: #ffd700; color: #000; transform: scale(1.05); }
        
        .ans-btn { background: rgba(255,255,255,0.1); border-color: rgba(255,255,255,0.3); color: white; }

        .hidden { display: none; }
        
        /* Анимация ошибки */
        @keyframes shake { 0%, 100% {transform: translateX(0);} 25% {transform: translateX(-5px);} 75% {transform: translateX(5px);} }
        .error { animation: shake 0.4s ease-in-out; }
    </style>
</head>
<body>

<div class="game-wrapper">
    <div class="lang-switch">
        <div class="l-btn" onclick="changeLang('de')">DE</div>
        <div class="l-btn" onclick="changeLang('en')">EN</div>
        <div class="l-btn active" onclick="changeLang('ru')">RU</div>
    </div>

    <div class="pig-container" id="pig-vessel">
        <svg class="pig-svg" viewBox="0 0 200 150">
            <path d="M170,80 c0,40-30,60-70,60 s-70-20-70-60 s30-60 70-60 s70,20,70,60" fill="none" stroke="rgba(255,255,255,0.5)" stroke-width="2.5"/>
            <path d="M65,35 l-12-18 l-12,18 Z" fill="rgba(255,255,255,0.1)" stroke="rgba(255,255,255,0.4)" />
            <path d="M135,35 l12-18 l12,18 Z" fill="rgba(255,255,255,0.1)" stroke="rgba(255,255,255,0.4)" />
            <ellipse cx="178" cy="80" rx="8" ry="12" fill="rgba(0,0,0,0.4)" stroke="rgba(255,255,255,0.5)" />
            <path d="M35,80 q-15,-15 -5,5" fill="none" stroke="rgba(255,255,255,0.4)" stroke-width="2" />
            <circle cx="120" cy="65" r="3" fill="rgba(255,255,255,0.6)" />
        </svg>
        <div id="gold-level" class="gold-fill"></div>
    </div>

    <div class="total-display"><span id="txt-total">Всего</span>: <span id="val-score">0</span></div>

    <div class="ui-box">
        <div id="q-display" class="question"></div>
        
        <div id="step-bet" class="btn-row">
            <button class="btn" onclick="setBet(10)">10</button>
            <button class="btn" onclick="setBet(25)">25</button>
            <button class="btn" onclick="setBet(50)">50</button>
        </div>

        <div id="step-ans" class="btn-row hidden"></div>
    </div>
</div>

<script>
    // --- НАСТРОЙКИ ВОПРОСОВ ---
    const gameData = {
        lang: 'ru',
        targetScore: 200, // При каком счете свинья полная
        questions: [
            { q: "Emil ... um neun Uhr gefühstückt.", a: ["ist", "hat"], c: 1 },
            { q: "Er ... um drei Uhr Sport gemacht.", a: ["hat", "ist"], c: 0 },
            { q: "Wir ... nach Hause gegangen.", a: ["haben", "sind"], c: 1 }
        ]
    };

    const i18n = {
        ru: { total: "Всего" },
        de: { total: "Gesamt" },
        en: { total: "Total" }
    };

    let score = 0;
    let currentIdx = 0;
    let currentBet = 0;

    function init() {
        renderQuestion();
        updateDisplay();
    }

    function renderQuestion() {
        document.getElementById('q-display').innerText = gameData.questions[currentIdx].q;
        document.getElementById('step-bet').classList.remove('hidden');
        document.getElementById('step-ans').classList.add('hidden');
    }

    function setBet(amount) {
        currentBet = amount;
        document.getElementById('step-bet').classList.add('hidden');
        const ansBox = document.getElementById('step-ans');
        ansBox.innerHTML = '';
        ansBox.classList.remove('hidden');

        gameData.questions[currentIdx].a.forEach((text, i) => {
            const b = document.createElement('button');
            b.className = 'btn ans-btn';
            b.innerText = text;
            b.onclick = () => checkResult(i);
            ansBox.appendChild(b);
        });
    }

    function checkResult(choice) {
        const isRight = choice === gameData.questions[currentIdx].c;
        const vessel = document.getElementById('pig-vessel');

        if (isRight) {
            score += currentBet;
        } else {
            score = Math.max(0, score - currentBet);
            vessel.classList.add('error');
            setTimeout(() => vessel.classList.remove('error'), 400);
        }

        updateDisplay();
        currentIdx = (currentIdx + 1) % gameData.questions.length;
        renderQuestion();
    }

    function updateDisplay() {
        document.getElementById('val-score').innerText = score;
        document.getElementById('txt-total').innerText = i18n[gameData.lang].total;
        
        // Наполнение: макс 88% для визуальной красоты
        const fill = Math.min(88, (score / gameData.targetScore) * 88);
        document.getElementById('gold-level').style.height = fill + '%';
    }

    function changeLang(l) {
        gameData.lang = l;
        document.querySelectorAll('.l-btn').forEach(b => b.classList.remove('active'));
        event.target.classList.add('active');
        updateDisplay();
    }

    init();
</script>
</body>
</html>

<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <style>
        :root { --accent: #ffcc00; --bg: #0d0d0d; }
        body { background: transparent; color: #fff; font-family: 'Segoe UI', sans-serif; text-align: center; margin: 0; overflow: hidden; }
        
        .game-card { background: #111; padding: 25px; border-radius: 35px; border: 1px solid #222; width: 420px; margin: auto; box-shadow: 0 20px 50px rgba(0,0,0,0.5); }
        
        /* –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Å–≤–∏–Ω–∫–∏ */
        .pig-box { position: relative; width: 280px; height: 180px; margin: 0 auto 15px; }
        .sand-fill {
            position: absolute; bottom: 35px; left: 50%; transform: translateX(-50%);
            width: 240px; background: linear-gradient(to top, #bf953f, #fcf6ba, #b38728);
            height: 0%; transition: height 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            clip-path: path('M215,85 c0-35-30-65-85-65 c-45,0-80,25-90,55 c-10,5-15,0-20-10 c-5-10-10,0-5,10 c5,15,15,25,25,30 c0,25,5,40,15,40 c15,0,20-15,25-25 h90 c5,10,10,25,20,25 c15,0,20-25,20-35 C195,110,215,105,215,85z');
        }
        .pig-outline {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            border: 2px solid rgba(255,255,255,0.1); border-radius: 20px; /* –ó–∞–≥–ª—É—à–∫–∞, –µ—Å–ª–∏ –Ω–µ—Ç –∫–∞—Ä—Ç–∏–Ω–∫–∏ */
            background: url('https://img.genially.com/666ae277f4d337001522cf25/dd99430b-967b-402c-b51c-4b1464309f3e.png') no-repeat center;
            background-size: contain; z-index: 5; pointer-events: none;
        }

        .score-val { font-size: 42px; color: var(--accent); font-weight: bold; margin-bottom: 10px; }
        .q-text { font-size: 18px; min-height: 50px; margin: 10px 0 20px; padding: 0 10px; color: #eee; }
        
        .btn-row { display: flex; gap: 10px; justify-content: center; flex-wrap: wrap; min-height: 60px; }
        .btn { 
            background: transparent; border: 2px solid var(--accent); color: var(--accent); 
            padding: 10px 20px; border-radius: 12px; cursor: pointer; font-weight: bold; 
            transition: 0.3s; font-size: 14px;
        }
        .btn:hover { background: rgba(255,204,0,0.1); transform: scale(1.05); }
        .btn:disabled { border-color: #444; color: #444; cursor: not-allowed; }
        
        .bet-btn { border-color: #ffcc00; color: #ffcc00; }
        .ans-btn { border-color: #fff; color: #fff; }
        
        .feedback { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 24px; font-weight: bold; opacity: 0; pointer-events: none; transition: 0.5s; z-index: 10; }
        .show-fb { opacity: 1; transform: translate(-50%, -60%); }
    </style>
</head>
<body>

<div class="game-card">
    <div class="pig-box">
        <div id="sand" class="sand-fill"></div>
        <div class="pig-outline"></div>
        <div id="fb" class="feedback"></div>
    </div>
    
    <div id="score" class="score-val">0</div>
    <div id="question" class="q-text">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
    
    <div id="controls" class="btn-row">
        </div>
</div>

<script>
    // –ü–ê–†–ê–ú–ï–¢–†–´ –î–õ–Ø –†–ï–î–ê–ö–¢–û–†–ê (–ø–æ—Ç–æ–º –±—É–¥—É—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç—å –∏–∑–≤–Ω–µ)
    const config = {
        lang: "RU",
        goal: 300,
        allowPenalty: true, // –í–∫–ª—é—á–∏—Ç—å —à—Ç—Ä–∞—Ñ—ã
        betSteps: [10, 25, 50],
        questions: [
            { q: "Emil ... um neun Uhr gef√ºhst√ºckt.", a: ["ist", "hat"], c: 1 },
            { q: "Wir ... gestern im Kino.", a: ["haben", "waren"], c: 1 },
            { q: "Ich ... meine Hausaufgaben gemacht.", a: ["habe", "bin"], c: 0 }
        ],
        messages: {
            RU: { correct: "–û—Ç–ª–∏—á–Ω–æ!", wrong: "–†–∏—Å–∫ –Ω–µ –æ–ø—Ä–∞–≤–¥–∞–ª—Å—è", start: "–°–¥–µ–ª–∞–π —Å—Ç–∞–≤–∫—É!" },
            EN: { correct: "Great!", wrong: "Risk failed", start: "Make a bet!" }
        }
    };

    let state = {
        score: 0,
        currentQ: 0,
        currentBet: 0,
        phase: 'BET' // BET –∏–ª–∏ ANS
    };

    function init() {
        render();
    }

    function render() {
        const qData = config.questions[state.currentQ];
        const msg = config.messages[config.lang];
        
        if (!qData) {
            document.getElementById('question').innerText = "–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞!";
            document.getElementById('controls').innerHTML = "";
            return;
        }

        document.getElementById('question').innerText = qData.q;
        const ctrl = document.getElementById('controls');
        ctrl.innerHTML = "";

        if (state.phase === 'BET') {
            // –§–ê–ó–ê 1: –°–¢–ê–í–ö–ê
            config.betSteps.forEach(amount => {
                const b = document.createElement('button');
                b.className = "btn bet-btn";
                b.innerText = "üí∞ " + amount;
                b.onclick = () => {
                    state.currentBet = amount;
                    state.phase = 'ANS';
                    render();
                };
                ctrl.appendChild(b);
            });
        } else {
            // –§–ê–ó–ê 2: –û–¢–í–ï–¢
            qData.a.forEach((text, i) => {
                const b = document.createElement('button');
                b.className = "btn ans-btn";
                b.innerText = text;
                b.onclick = () => checkAnswer(i);
                ctrl.appendChild(b);
            });
        }
        
        updatePig();
    }

    function checkAnswer(index) {
        const qData = config.questions[state.currentQ];
        const isCorrect = index === qData.c;
        const fb = document.getElementById('fb');
        const msg = config.messages[config.lang];

        if (isCorrect) {
            state.score += state.currentBet;
            fb.innerText = msg.correct;
            fb.style.color = "#44ff44";
        } else {
            if (config.allowPenalty) {
                state.score = Math.max(0, state.score - state.currentBet);
            }
            fb.innerText = msg.wrong;
            fb.style.color = "#ff4444";
        }

        fb.classList.add('show-fb');
        
        setTimeout(() => {
            fb.classList.remove('show-fb');
            state.currentQ++;
            state.phase = 'BET';
            render();
        }, 1500);
    }

    function updatePig() {
        document.getElementById('score').innerText = state.score;
        const pct = Math.min(100, (state.score / config.goal) * 100);
        // –†–µ–≥—É–ª–∏—Ä—É–µ–º –≤—ã—Å–æ—Ç—É (75% - —ç—Ç–æ –ø—Ä–∏–º–µ—Ä–Ω–æ –ø–æ–ª–Ω—ã–π –∂–∏–≤–æ—Ç —Å–≤–∏–Ω–∫–∏)
        document.getElementById('sand').style.height = (pct * 0.75) + "%";
    }

    init();
</script>
</body>
</html>

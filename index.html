<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <style>
        /* Текстура золотого песка (не плоский желтый!) */
        :root { 
            --sand-texture: radial-gradient(circle at 50% 50%, #f9e076 0%, #d4af37 50%, #b8860b 100%); 
        }
        body { background: #000; color: #fff; font-family: sans-serif; display: flex; margin: 0; height: 100vh; }
        
        .editor { width: 350px; background: #1a1a1a; padding: 20px; border-right: 2px solid #333; }
        .preview { flex-grow: 1; display: flex; align-items: center; justify-content: center; background: #0d0d0d; }

        /* КОНТЕЙНЕР ДЛЯ МАГИИ */
        .pig-container {
            position: relative;
            width: 300px;
            height: 200px;
        }

        /* ПЕСОК, КОТОРЫЙ ПРИНИМАЕТ ФОРМУ СВИНКИ */
        .sand-layer {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 0%; /* Наполняется скриптом */
            background: var(--sand-texture);
            
            /* ГЛАВНОЕ: Песок виден только внутри контуров картинки */
            -webkit-mask-image: var(--pig-url);
            mask-image: var(--pig-url);
            -webkit-mask-size: contain;
            -webkit-mask-repeat: no-repeat;
            -webkit-mask-position: bottom;
            
            transition: height 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 1;
        }

        /* САМА СВИНКА (БЛИКИ И КОНТУРЫ) */
        .pig-overlay {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            object-fit: contain;
            z-index: 2; /* Всегда сверху */
            pointer-events: none;
            opacity: 0.8; /* Делаем её чуть прозрачной для объема */
        }

        .score-display { font-size: 40px; color: #ffcc00; margin-top: 20px; text-align: center; font-weight: bold; }
        .bet-btns { display: flex; gap: 10px; margin-top: 15px; }
        .btn { border: 2px solid #ffcc00; background: none; color: #ffcc00; padding: 10px 20px; border-radius: 8px; cursor: pointer; }
    </style>
</head>
<body>

<div class="editor">
    <label style="font-size: 10px; color: #888;">URL СВИНКИ (PNG)</label>
    <input type="text" id="p-url" style="width:100%; margin-bottom: 20px;" value="https://i.ibb.co/pX99S99/glass-pig.png">
    <button onclick="apply()" style="width:100%; padding:10px; background:#ffcc00; border:none; font-weight:bold;">ОБНОВИТЬ</button>
</div>

<div class="preview">
    <div style="text-align: center;">
        <div class="pig-container" id="v-box" style="--pig-url: url('https://i.ibb.co/pX99S99/glass-pig.png')">
            <div id="v-sand" class="sand-layer"></div>
            <img id="v-img" class="pig-overlay" src="https://i.ibb.co/pX99S99/glass-pig.png">
        </div>
        <div class="score-display" id="v-score">0</div>
        <div class="bet-btns">
            <button class="btn" onclick="add(10)">+10</button>
            <button class="btn" onclick="add(50)">+50</button>
            <button class="btn" onclick="add(100)">+100</button>
        </div>
    </div>
</div>

<script>
    let current = 0;
    function apply() {
        const u = document.getElementById('p-url').value;
        document.getElementById('v-img').src = u;
        document.getElementById('v-box').style.setProperty('--pig-url', `url('${u}')`);
        current = 0;
        update();
    }
    function add(n) { current += n; update(); }
    function update() {
        document.getElementById('v-score').innerText = current;
        let h = Math.min(100, (current / 300) * 100);
        document.getElementById('v-sand').style.height = h + '%';
    }
    apply();
</script>
</body>
</html>
